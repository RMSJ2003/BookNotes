<%- include("partials/header.ejs") %>
<title>Richard M. Sahagun Jr. | Books List</title>
</head>
<body>

<div id="title-background">
    <div class="container py-5">
        <div class="row mb-4">
            <div class="col-12 p-0">
                <h1 class="m-0" id="title">Richard M. Sahagun Jr.</h1>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-12 p-0">
                <h2 class="m-0 subtitle">Books I've Read</h2>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-12 p-0">
                <p>Summary and detailed notes for each. This page will constantly update as I read more. I update them 
                    <!-- Goes to login form -->
                    <a href="/authentication" class="link">here</a>!
                </p>
                <p>Summary and notes are different however! Summary only contains the information abou the book while my notes contains my insights and real life application and lessons. If you have any questions, you can <a href="mailto:<%= email %>" class="link">email me</a>.</p>
            </div>
        </div>
        <form action="/read" method="POST">
            <div class="row mb-2">
                <div class="col-9 col-md-5 col-lg-4 col-xl-4 p-0">
                    <input type="text" name="title" autofocus placeholder="Search Book Title" class="w-100">
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-9 col-md-5 col-lg-4 col-xl-4 p-0">
                    <input type="text" name="author" autofocus placeholder="Search Book Author" class="w-100">
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-12 p-0">
                    <input type="submit" name="read" value="Search" class="p-0 link">
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-12 p-0">
                    <p>Sort by <input type="submit" name="sortTitle" value="title" class="link"> |
                        <input type="submit" name="sortDate" value="newest" class="link"> |
                        <input type="submit" name="sortRating" value="rating" class="link">
                    </p>
                </div>
            </div>
        </form>
        <hr>
    </div>
</div>
<div id="body-background">
    <!-- Loop through the book notes -->
    <% for( let index = 0; index < books.length; index++ ) { %>
        <div class="container py-5 px-0">
            <div class="mb-5">
                <form action="/notes" method="post">
                    <!-- Replace img src with acutall img cover and actual alt -->
                    <img src="<%= `https://books.google.com/books/content?id=${books[index].cover_id}&printsec=frontcover&img=1&zoom=5&source=gbs_api` %>" alt="Book Cover" class="me-4 mb-2 book-cover-img">
                    <h2 class="mb-4 heading">
                    <!-- Add href -->
                    <a href="" class="link"><%= books[index].title %></a>
                    </h2>
                    <div class="subtitle">Date read: <%= books[index].read_date %></div>
                    <div class="subtitle mb-4">My rating: <%= books[index].rating %>/10</div>
                    <p class="mx-0 justify"><%= books[index].summary %></p>
                    <p>Read my<input type="submit" value="notes" class="link"></p>

                    <!-- Hidden book note's details: -->
                    <input type="hidden" name="id" value="<%= books[index].id %>" autocomplete="off">
                    <input type="hidden" name="title" value="<%= books[index].title %>" autocomplete="off">
                    <input type="hidden" name="author" value="<%= books[index].author %>" autocomplete="off">
                    <input type="hidden" name="date" value="<%= books[index].read_date %>" autocomplete="off">
                    <input type="hidden" name="summary" value="<%= books[index].summary %>" autocomplete="off">
                    <input type="hidden" name="rating" value="<%= books[index].rating %>" autocomplete="off">
                    <input type="hidden" name="notes" value="<%= books[index].notes %>" autocomplete="off">
                    <input type="hidden" name="update_date" value="<%= books[index].update_date %>" autocomplete="off">
                    <input type="hidden" name="cover_id" value="<%= books[index].cover_id %>" autocomplete="off">

                    
                </form>
            </div>               
        </div>
    <% } %>
</div>

<%- include("partials/footer.ejs") %>    